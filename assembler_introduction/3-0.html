<!doctype html>
<html>
<head>
<title>2003lk入門 ― 3-0. 大小比較と桁の移動</title>
<meta charset="UTF-8">
<link rel="stylesheet" href="../common.css">
<link rel="stylesheet" href="ny_jurli.css">
<script src="ny_jurli.js"></script>
</head>
<body class="cool">
<h1>2003lk入門</h1>
<a href="index.html">トップに戻る</a>
<div class="ny_jurli">
	<p>→<input type="button" value="非真理設定を隠す" onclick="hide_ny_jurli()">をクリックすると非真理設定が非表示になります。ページを再読み込みすると戻ります。</p>
</div>
<hr>
<h2>ksi.3 実践</h2>
<h3>lexn.0 大小比較と桁の移動</h3>

<p>[第3章](ksi. 3)では、今まで学んだ命令を応用して様々な処理を書いていきます。ただし、その前に、数がスイッチ列で扱われていることに依存する便利な命令を学んでいきましょう。</p>

<hr>

<p><a href="2-5.html">ksi.2のlexn.5</a>で<code>fi</code>と<code>malkRz</code>について学びましたが、そこで学んだのは数が等しいかどうか判定するための命令だけでした。数が等しいかどうかを判定するのは簡単です。32個の[スイッチ](lysol)が全て一致していれば等しく、そうでなければ異なるのですから。</p>
<p>さて、問題は大小判定をするときです。<a href="1-1.html">ksi.1のlexn.1</a>で述べたとおり、右端のスイッチの価値を1、その左を2、そのさらに左を4、というふうに決めていくと、32個のスイッチで0から4294967295までの数を扱うことができ、左端のスイッチの価値を2147483648ではなく-2147483648と解釈してあげると、-2147483648から2147483647までの数を扱うことができるようになります。つまり、左端のスイッチの価値には2通りの解釈があります。</p>

<p>既に述べたとおり、足し算や引き算を行っている限りでは</p>

<pre style="font-size:120%">
  11111111111111111111111111110100 → -12
<u>+ 00000000000000000000000000011101 →  29</u>
 <span style="color:#999">1</span>00000000000000000000000000010001 →  17 

  11111111111111111111111111110100 → 4294967284
<u>+ 00000000000000000000000000011101 →         29</u>
 <span style="color:#999">1</span>00000000000000000000000000010001 → 4294967313  = 17 (4294967296を周期として同一視するので)
</pre>

<p>のように、どちらを用いても一貫した処理ができますが、大小比較に関してはそうではありません。29は-12より大きく、4294967284よりも小さいわけですが、この2つの数の違いは2003lkにとっては左端のスイッチの価値をどう解釈するかに過ぎないのですから。</p>

<p>ということで、どちらの解釈を使ってほしいかによって使う命令が変わってきます。とはいえ、我々の日常では4294967284よりも-12の方が登場頻度が高いため、左端のスイッチの価値を-2147483648と解釈する方の命令の方が短く書けるようになっています。例えば、<code>f0</code>と<code>f1</code>を比較するには、次のように書きます。</p>

<table class="qq" border="1" bordercolor="#888" cellspacing="0">
<tbody>
<tr>
<td>&nbsp;意味</td>
<td>&nbsp;命令</td>
</tr>
<tr>
<td>&nbsp;[もし<code>f0</code>が<code>f1</code>以下なら](fi f0 es f1 xut loler)</td>
<td>&nbsp;<code>fi f0 f1 xtlo</code>&nbsp;</td>
</tr>
<tr>
<td>&nbsp;[もし<code>f0</code>が<code>f1</code>未満なら](fi f0 es f1 xy loler)</td>
<td>&nbsp;<code>fi f0 f1 xylo</code>&nbsp;</td>
</tr>

<tr>
<td>&nbsp;[もし<code>f0</code>が<code>f1</code>以上なら](fi f0 es f1 xo loler)</td>
<td>&nbsp;<code>fi f0 f1 xolo</code>&nbsp;</td>
</tr>
<tr>
<td>&nbsp;[もし<code>f0</code>が<code>f1</code>を超えるなら](fi f0 es f1 le loler)</td>
<td>&nbsp;<code>fi f0 f1 llo</code>&nbsp;</td>
</tr>
</tbody>
</table>

<p>一方、左端のスイッチの価値を2147483648と解釈する命令については、[負でない](ny snakxaz)を略した<code>nys</code>を<code>xtlo</code>や<code>xylo</code>などの末尾に付けます。つまり、<code>fi f3 f0 llonys</code>や<code>fi f2 f1 xolonys</code>などとなります。</p>

<hr>

<p>次に、「一つ左のスイッチは価値が二倍」という性質を利用した、「桁を[動かす](dusnij)」という演算について考えていきましょう。
</p>

<p>仕組みは簡単です。一つ左のスイッチは価値が二倍なのですから、全ての桁を一つ左にずらして一番下の桁にゼロを入れれば、数が二倍になるのです。</p>

<pre style="font-size:120%">
00000000000000000000000000011101 →  29
00000000000000000000000000111010 →  58
00000000000000000000000001110100 → 116
</pre>

<p>この性質は、負の数に関しても上手く成り立ちます。というのも、-6は6を足したときに0になるようなスイッチ列なのですから、それを二倍すると（「6を足したときに0」と「6を足したときに0」の和ですから）「12を足したときに0」という性質を持つスイッチ列となるのです。</p>

<pre style="font-size:120%">
11111111111111111111111111111010 →  -6
11111111111111111111111111110100 → -12
11111111111111111111111111101000 → -24
</pre>

<p>2003lkでの表記法ですが、<code>f2</code>を3桁[左へ移動させる](dusnij Restutonj)には、<code>dRo 3 f2</code>と書きます。</p>

<p>さて、ということは、この操作を逆にすれば数を半分にしたり四分の一にしたりできるわけです。ところが、ここでは前述の「解釈の差」が効いてきます。</p>

<p>まず、左端のスイッチが0のとき。このときはどちらの解釈でも値は変わらないので、先程のを逆転させて</p>

<pre style="font-size:120%">
00000000000000000000000001110100 → 116
00000000000000000000000000111010 →  58
00000000000000000000000000011101 →  29
</pre>

<p>と「右にずらし、左端には0を入れる」とすることで半分にできます。一方、左端のスイッチが1のときには話が変わってきます。まず、左端のスイッチの価値を2147483648と解釈するとき。</p>

<pre style="font-size:120%">
11111111111111111111111111110100 → 4294967284
01111111111111111111111111111010 → 2147483642
</pre>

<p>この場合は「右にずらし、左端には0を入れる」です。一方、左端のスイッチの価値を-2147483648と解釈するときはどうでしょう？</p>

<pre style="font-size:120%">
11111111111111111111111111110100 → -12
11111111111111111111111111111010 →  -6
11111111111111111111111111111101 →  -3
</pre>

<p>このように、「右にずらし、左端には1を入れる」ことで半分にできます。</p>

<p>ということで、</p>

<ul>
	<li>[負でない](ny snakxaz)場合は、常に「右にずらし、左端には0を入れる」とすればよい</li>
	<li>[負にすることが出来る](snakxazasyk)場合は、「右にずらし、左端は元の状態を保持する」とすればよい</li>
</ul>

<p>ということが分かります。</p>

<p>前者の命令は[左へ移動させる](dusnij Restutonj)命令である<code>dRo</code>の真逆なので、[右へ移動させる](dusnij tesnokonj)を略した<code>dto</code>と書きます。一方、後者はsnakxazasykを処理するためのものなので、<code>dtosna</code>と書きます。</p>


<hr>
<a href="./index.html">トップへ</a>&nbsp;&nbsp;&nbsp;<a href="./3-1.html">次のページへ</a>
<br>
<br>
<br>

</body>
</html>
